var S=Object.defineProperty;var o=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var j=(c,i,e)=>i in c?S(c,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[i]=e,d=(c,i)=>{for(var e in i||(i={}))w.call(i,e)&&j(c,e,i[e]);if(o)for(var e of o(i))y.call(i,e)&&j(c,e,i[e]);return c};import{j as s,L as T}from"./main-80.js";import{_ as p,k as h,l as k,n as g}from"./bi.433.0.js";import{a as M,T as N,g as n,t as V}from"./bi.103.892.js";import{T as A}from"./bi.895.650.js";const _=(c,i,e)=>{const t=d({},i);t.field_map.splice(c,0,{}),e(d({},t))},I=(c,i,e)=>{const t=d({},i);t.field_map.length>1&&t.field_map.splice(c,1),e(d({},t))},F=(c,i,e,t)=>{const a=d({},e);a.field_map[i][c.target.name]=c.target.value,c.target.value==="custom"&&(a.field_map[i].customValue=""),t(d({},a))};function L({i:c,formFields:i,field:e,theEventsCalendarConf:t,setTheEventsCalendarConf:a}){var r,m;const b=(t==null?void 0:t.staticFields.filter(l=>l.required===!0))||[],u=((r=t==null?void 0:t.staticFields)==null?void 0:r.filter(l=>l.required===!1))||[];return s.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:s.jsxs("div",{className:"pos-rel flx",children:[s.jsxs("div",{className:"flx integ-fld-wrp",children:[s.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:e.formField||"",onChange:l=>F(l,c,t,a),children:[s.jsx("option",{value:"",children:p("Select Field","bit-integrations")}),s.jsx("optgroup",{label:p("Form Fields","bit-integrations"),children:i==null?void 0:i.map(l=>s.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))}),s.jsx("option",{value:"custom",children:p("Custom...","bit-integrations")}),s.jsx("optgroup",{label:"General Smart Codes",children:(m=h)==null?void 0:m.map(l=>s.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))})]}),e.formField==="custom"&&s.jsx(A,{onChange:l=>k(l,c,t,a),label:p("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:e.customValue,placeholder:p("Custom Value","bit-integrations"),formFields:i}),s.jsxs("select",{className:"btcd-paper-inp",disabled:c<b.length,name:"theEventsCalendarField",value:c<b?b[c].label||"":e.theEventsCalendarField||"",onChange:l=>F(l,c,t,a),children:[s.jsx("option",{value:"",children:p("Select Field","bit-integrations")}),c<b.length?s.jsx("option",{value:b[c].key,children:b[c].label},b[c].key):u.map(({key:l,label:x})=>s.jsx("option",{value:l,children:x},l))]})]}),s.jsx("div",{className:"flx integ-fld-wrp",children:c>=b.length&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>_(c,t,a),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),s.jsx("button",{onClick:()=>I(c,t,a),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:s.jsx("span",{className:"btcd-icn icn-trash-2"})})]})})]})})}function W({formFields:c,theEventsCalendarConf:i,setTheEventsCalendarConf:e,loading:t,setLoading:a,setSnackbar:b}){const u=m=>{const l=d({},i);if(l.selectedTask=m,l.selectedEvent="",m){const x=V(m);l.staticFields=x.staticFields,l.field_map=x.fieldMap,m===N.NEW_ATTENDEE&&n(l,e,t,a)}else l.staticFields=[],l.field_map=[];e(d({},l))},r=(m,l)=>{const x=d({},i);x[l]=m,e(d({},x))};return s.jsx(s.Fragment,{children:s.jsxs("div",{children:[s.jsxs("div",{className:"flx mt-3 mb-4",children:[s.jsx("b",{className:"wdt-200 d-in-b",children:p("Select Task:","bit-integrations")}),s.jsx(g,{style:{width:"450px"},options:M,className:"msl-wrp-options",defaultValue:i==null?void 0:i.selectedTask,onChange:m=>u(m),singleSelect:!0})]}),i.selectedTask===N.NEW_ATTENDEE&&s.jsxs("div",{className:"flx mt-3 mb-4",children:[s.jsx("b",{className:"wdt-200 d-in-b",children:p("Select Event:","bit-integrations")}),s.jsx(g,{style:{width:"450px"},options:i==null?void 0:i.events,className:"msl-wrp-options",defaultValue:i==null?void 0:i.selectedEvent,onChange:m=>r(m,"selectedEvent"),disabled:t.events,singleSelect:!0}),s.jsx("button",{onClick:()=>n(i,e,t,a),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${p("Refresh events","bit-integrations")}'`},disabled:t.events,type:"button",children:"â†»"})]}),t.events&&s.jsx(T,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}),s.jsx("div",{className:"mt-5",children:s.jsx("b",{className:"wdt-100",children:p("Field Map","bit-integrations")})}),s.jsx("br",{}),s.jsx("div",{className:"btcd-hr mt-1"}),s.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:p("Form Fields","bit-integrations")})}),s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:p("The Events Calendar Fields","bit-integrations")})})]}),i.selectedTask&&(i==null?void 0:i.field_map.map((m,l)=>s.jsx(L,{i:l,field:m,theEventsCalendarConf:i,formFields:c,setTheEventsCalendarConf:e,setSnackbar:b},`rp-m-${l+9}`))),(i==null?void 0:i.selectedTask)&&s.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:s.jsx("button",{onClick:()=>_(i.field_map.length,i,e),className:"icn-btn sh-sm",type:"button",children:"+"})})]})})}export{W as T};
