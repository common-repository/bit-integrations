var V=Object.defineProperty,W=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var _=(a,t,s)=>t in a?V(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,N=(a,t)=>{for(var s in t||(t={}))K.call(t,s)&&_(a,s,t[s]);if(G)for(var s of G(t))Q.call(t,s)&&_(a,s,t[s]);return a},C=(a,t)=>W(a,J(t));var D=(a,t,s)=>new Promise((b,h)=>{var d=l=>{try{m(s.next(l))}catch(g){h(g)}},u=l=>{try{m(s.throw(l))}catch(g){h(g)}},m=l=>l.done?b(l.value):Promise.resolve(l.value).then(d,u);m((s=s.apply(a,t)).next())});import{j as e,r as p,f as X,e as Y,L as Z,u as ee,o as te}from"./main-955.js";import{$ as P,x as R}from"./bi.326.431.js";import{B as O}from"./bi.687.700.js";import{e as se,a as ae,_ as r,c as $}from"./bi.223.0.js";import{S as ie}from"./bi.951.13.js";import{S as ne}from"./bi.496.907.js";import{I as re,s as le}from"./bi.864.3.js";import{a as oe,t as ce,r as de,G as ue,h as me,c as he}from"./bi.127.685.js";import{T as L,t as pe}from"./bi.701.706.js";import{A as xe}from"./bi.638.905.js";import"./bi.696.9.js";import"./bi.300.11.js";import"./bi.283.14.js";import"./bi.917.686.js";import"./bi.795.687.js";import"./bi.991.663.js";import"./bi.355.664.js";const be=({name:a,options:t,selectedAuthType:s,handleChange:b})=>e.jsx("div",{className:"user-radio-input",children:t.map((h,d)=>e.jsxs("label",{className:`btn ml-2 ${s===h?"btcd-btn-purple-active":"btcd-btn-o-purple"}`,children:[e.jsx("input",{type:"radio",name:a,value:h,checked:s===h,onClick:()=>b(h),className:"radio-input"}),h]},d))});function ge({formID:a,sheetConf:t,setSheetConf:s,step:b,setstep:h,isLoading:d,setIsLoading:u,setSnackbar:m,redirectLocation:l,isInfo:g}){const[v,j]=p.useState(!1),[i,f]=p.useState({clientId:"",clientSecret:""}),S=X(se),{googleSheet:o}=pe,[c,A]=p.useState([]),[I,B]=Y(ae),[y,F]=p.useState(""),[x,U]=p.useState(null),q=n=>{F(n),j(!1),s(k=>N(C(N({},k),{selectedAuthType:n}),n==="One Click Authorization"?{clientId:"",clientSecret:""}:{})),n==="One Click Authorization"&&z(n),u(!1)},z=n=>{oe(t,n,f,u)},T=()=>{u(!0);const n={actionName:t.type};$(null,"auth/get",n,"GET").then(k=>{k.success&&k.data.data.length>0&&A(k.data.data),u(!1)})};p.useEffect(()=>{b===1&&T()},[]);const H=n=>D(this,null,function*(){yield ce(n,t,s,y,c,A,u,m),B(void 0),T()});p.useEffect(()=>{!I||Object.keys(I).length===0||H(I)},[I]);const w=n=>{const k=N({},t),E=N({},i);E[n.target.name]="",k[n.target.name]=n.target.value,f(E),s(k)},M=()=>{s(n=>C(N({},n),{tokenDetails:c[x]?c[x].tokenDetails:"",authId:c[x]?c[x].id:""})),setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),h(2),de(a,C(N({},t),{tokenDetails:c[x]?c[x].tokenDetails:"",authId:c[x]?c[x].id:""}),s,u,m)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:b===1&&900,height:b===1&&"auto"},children:[(o==null?void 0:o.youTubeLink)&&e.jsx(L,{title:"Google Sheets",youTubeLink:o==null?void 0:o.youTubeLink}),(o==null?void 0:o.docLink)&&e.jsx(L,{title:"Google Sheets",docLink:o==null?void 0:o.docLink}),e.jsxs("div",{children:[e.jsx("h2",{children:"Choose channel"}),e.jsx(be,{name:"auth",options:["One Click Authorization","Custom Authorization"],selectedAuthType:y,handleChange:q})]}),y==="Custom Authorization"&&e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:r("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:w,name:"name",value:t.name,type:"text",placeholder:r("Integration Name...","bit-integrations")}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:r("Homepage URL:","bit-integrations")})}),e.jsx(P,{value:`${window.location.origin}`,className:"field-key-cpy w-6 ml-0",setSnackbar:m}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:r("Authorized Redirect URIs:","bit-integrations")})}),e.jsx(P,{value:l||`${S.api.base}/redirect`,className:"field-key-cpy w-6 ml-0",setSnackbar:m}),e.jsxs("small",{className:"d-blk mt-5",children:[r("To get Client ID and SECRET , Please Visit","bit-integrations")," ",e.jsx("a",{className:"btcd-link",href:"https://console.developers.google.com/apis/credentials",target:"_blank",rel:"noreferrer",children:r("Google API Console","bit-integrations")})]}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:r("Client id:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:w,name:"clientId",value:t.clientId,type:"text",placeholder:r("Client id...","bit-integrations"),disabled:g}),e.jsx("div",{style:{color:"red",fontSize:"15px"},children:i.clientId}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:r("Client secret:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:w,name:"clientSecret",value:t.clientSecret,type:"text",placeholder:r("Client secret...","bit-integrations"),disabled:g}),e.jsx("div",{style:{color:"red",fontSize:"15px"},children:i.clientSecret}),e.jsxs("button",{onClick:()=>z(y),className:"btn btcd-btn-lg purple sh-sm flx",type:"button",disabled:d,children:[v?r("Authorized ✔","bit-integrations"):r("Authorize","bit-integrations"),d&&e.jsx(R,{size:20,clr:"#022217",className:"ml-2"})]}),e.jsx("br",{})]}),d&&y!=="Custom Authorization"&&e.jsx(Z,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),c.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Choose your connected account"}),e.jsx(xe,{authData:c,setAuthData:A,selectedUserIndex:x,setSelectedUserIndex:U,setIsLoading:u})]}),v&&y==="One Click Authorization"&&e.jsxs("button",{onClick:()=>z(),className:"btn btcd-btn-lg purple sh-sm flx",type:"button",disabled:d,children:[v?r("Authorized ✔","bit-integrations"):r("Authorize","bit-integrations"),d&&e.jsx(R,{size:20,clr:"#022217",className:"ml-2"})]}),e.jsx("br",{}),e.jsxs("button",{onClick:()=>M(),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",disabled:x==null||c.length===0,children:[r("Next","bit-integrations"),e.jsx(O,{className:"ml-1 rev-icn"})]})]})}function Re({formFields:a,setFlow:t,flow:s,allIntegURL:b}){const h=ee(),{formID:d}=te(),[u,m]=p.useState(!1),[l,g]=p.useState(1),[v,j]=p.useState({show:!1}),[i,f]=p.useState({name:"Google Sheet",type:"Google Sheet",clientId:"",clientSecret:"",spreadsheetId:"",worksheetName:"",field_map:[{formField:"",googleSheetField:""}],header:"ROWS",headerRow:"A1",actions:{}});p.useEffect(()=>{i.oneClickAuthCredentials===void 0&&$(null,"get/credentials",{actionName:"googleSheet"},"Get").then(c=>{f(A=>C(N({},A),{oneClickAuthCredentials:c.data}))})},[]);const S=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!he(i)){j({show:!0,msg:r("Please map fields to continue.","bit-integrations")});return}i.spreadsheetId!==""&&i.worksheetName!==""&&i.field_map.length>0&&g(3)};return e.jsxs("div",{children:[e.jsx(ie,{snack:v,setSnackbar:j}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(ne,{step:3,active:l})}),e.jsx(ge,{formID:d,sheetConf:i,setSheetConf:f,step:l,setstep:g,setSnackbar:j,isLoading:u,setIsLoading:m}),e.jsxs("div",{className:"btcd-stp-page",style:{width:l===2&&900,height:l===2&&"auto"},children:[e.jsx(ue,{formID:d,formFields:a,handleInput:o=>me(o,i,f,d,m,j),sheetConf:i,setSheetConf:f,isLoading:u,setIsLoading:m,setSnackbar:j}),e.jsxs("button",{onClick:()=>S(),disabled:!i.spreadsheetId||!i.worksheetName||i.field_map.length<1,className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[r("Next","bit-integrations"),e.jsx(O,{className:"ml-1 rev-icn"})]})]}),e.jsx(re,{step:l,saveConfig:()=>le({flow:s,setFlow:t,allIntegURL:b,conf:i,navigate:h,setIsLoading:m,setSnackbar:j}),isLoading:u,dataConf:i,setDataConf:f,formFields:a})]})}export{Re as default};
