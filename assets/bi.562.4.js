var k=Object.defineProperty;var x=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var p=(t,n,i)=>n in t?k(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,r=(t,n)=>{for(var i in n||(n={}))A.call(n,i)&&p(t,i,n[i]);if(x)for(var i of x(n))O.call(n,i)&&p(t,i,n[i]);return t};import{r as o,j as s}from"./main-955.js";import{c as b,_ as l,d as h}from"./bi.223.0.js";import{r as j}from"./bi.283.14.js";import{S as m}from"./bi.630.12.js";import{S as T}from"./bi.951.13.js";function I(){const[t,n]=o.useState({}),[i,u]=o.useState([]),[y,N]=o.useState({show:!1});o.useEffect(()=>{const c=b({},"analytics/check","","GET").then(e=>{u(e.data)}),a=b({},"get/config",null,"GET").then(e=>("success"in e&&e.success&&n(e.data),e!=null&&e.success?l("Successfully fetched","bit-integrations"):"Error"));Promise.all([c,a]).catch(e=>{console.error(e)}),h.promise(a,{success:e=>e,error:l("Error Occurred","bit-integrations"),loading:l("Fetching...")})},[]);const v=c=>{const a=r({},t),e=b({data:a},"app/config").then(d=>{if("success"in d&&d.success)return l("Save successfully done","bit-integrations");delete a[c],n(r({},a))}).catch(()=>l("Failed to save","bit-integrations"));h.promise(e,{success:d=>d,error:l("Error Occurred","bit-integrations"),loading:l("Updating...")})},w=c=>{b({isChecked:c},"analytics/optIn").then(a=>{h.success(l("Opt-in status updated","bit-integrations"))}).catch(()=>{h.error(l("Failed to save","bit-integrations"))})},g=j.useAsyncDebounce(v,500),S=j.useAsyncDebounce(w,500),f=({target:{name:c,checked:a}})=>{const e=r({},t);a?e[c]=!0:delete e[c],n(e),g(c)},_=({target:{name:c,value:a}})=>{const e=r({},t);a?e[c]=a:delete e[c],n(e),g(c)},E=()=>{const c=!i;u(c),S(c)};return s.jsxs("div",{className:"btcd-f-settings",children:[s.jsx(T,{snack:y,setSnackbar:N}),s.jsxs("div",{id:"btcd-settings-wrp",className:"btcd-s-wrp",children:[s.jsxs("div",{className:"w-6 mt-3",children:[s.jsxs("div",{className:"flx flx-between sh-sm br-10 btcd-setting-opt",children:[s.jsx("div",{children:s.jsxs("b",{children:[s.jsx("span",{className:"btcd-icn  icn-trash-fill mr-2"}),l("Erase all data of this plugin in deletion","bit-integrations")]})}),s.jsx(m,{action:f,name:"erase_db",checked:t==null?void 0:t.erase_db,className:"flx"})]}),s.jsx("br",{})]}),s.jsxs("div",{className:"w-6 mt-3",children:[s.jsxs("div",{className:"flx flx-between sh-sm br-10 btcd-setting-opt",children:[s.jsx("div",{children:s.jsxs("b",{children:[s.jsx("span",{className:"btcd-icn  icn-trash-fill mr-2"}),l("Turn off Opt In","bit-integrations")]})}),s.jsx(m,{action:E,name:"erase_db",checked:i,className:"flx"})]}),s.jsx("br",{})]}),s.jsx("div",{className:"w-6 mt-3",children:s.jsxs("div",{className:"flx flx-between sh-sm br-10 btcd-setting-opt",children:[s.jsx("div",{className:"",children:s.jsxs("b",{children:[s.jsx("span",{className:"btcd-icn icn-trash-fill mr-2"}),l("Specify after how many days  old log will be deleted","bit-integrations")]})}),s.jsxs("div",{className:"flx",children:[s.jsx("input",{onChange:_,name:"day",value:t==null?void 0:t.day,disabled:!t.enable_log_del,className:"btcd-paper-inp mr-2 wdt-100",placeholder:"Day",type:"number",min:"1"}),s.jsx(m,{action:f,name:"enable_log_del",checked:t==null?void 0:t.enable_log_del,className:"flx"})]})]})}),s.jsx("div",{className:"mb-50"})]})]})}export{I as default};
